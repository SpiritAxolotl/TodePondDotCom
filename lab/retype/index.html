<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script
  data-goatcounter="https://todepond.goatcounter.com/count"
  async
  src="//gc.zgo.at/count.js"></script>
<title>Tadi lab</title>
<link rel="shortcut icon" href="/favicon.png" />
<meta property="og:image" content="https://todepond.com/lab/og.png" />
<meta property="og:title" content="Tadi lab" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Tadi lab" />
<meta name="twitter:description" content="" />
<meta name="twitter:image" content="https://todepond.com/lab/og.png" />

<link rel="stylesheet" href="/style.css" />

<main
  style="
    height: 100%;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    align-items: flex-start;
  ">
  <span>ðŸ”´ Recording</span>
  <textarea style="height: 100%; resize: none"></textarea>
  <button style="align-self: flex-end">Download recording</button>
</main>

<script type="module">
  const buffer = [];
  const textarea = document.querySelector("textarea");
  textarea.addEventListener("input", () => {
    const text = textarea.value;
    buffer.push(text);
  });
  const downloadButton = document.querySelector("button");
  downloadButton.addEventListener("click", () => {
    const blob = new Blob(buffer, { type: "text/json" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = "recording.json";
    a.click();
  });
</script>
