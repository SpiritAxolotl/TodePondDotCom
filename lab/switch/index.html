<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script
  data-goatcounter="https://todepond.goatcounter.com/count"
  async
  src="//gc.zgo.at/count.js"></script>
<title>Tadi lab</title>
<link rel="shortcut icon" href="/favicon.png" />
<meta property="og:image" content="https://todepond.com/lab/og.png" />
<meta property="og:title" content="Tadi lab" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Tadi lab" />
<meta name="twitter:description" content="" />
<meta name="twitter:image" content="https://todepond.com/lab/og.png" />

<link rel="stylesheet" href="/style.css" />

<style>
  * {
    touch-action: none;
    overscroll-behavior: none;
    box-sizing: border-box;
  }

  canvas {
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
  }
</style>

<canvas></canvas>

<script type="module">
  const canvas = document.querySelector("canvas");
  const ctx = canvas.getContext("2d");

  let dpr = window.devicePixelRatio;

  function handleResize() {
    const canvas = document.querySelector("canvas");
    dpr = window.devicePixelRatio;
    canvas.width = window.innerWidth * dpr;
    canvas.height = window.innerHeight * dpr;
  }

  handleResize();
  addEventListener("resize", handleResize);

  function tick() {
    draw();
    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);

  const bits = [];

  const BIT_SIZE = 5;
  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    ctx.fillStyle = "white";
    for (const bit of bits) {
      ctx.beginPath();
      ctx.arc(bit.x, bit.y, BIT_SIZE * dpr, 0, Math.PI * 2);
      ctx.fill();
      ctx.closePath();
    }

    ctx.strokeStyle = "white";
    ctx.lineWidth = 2 * dpr;
    ctx.beginPath();
    for (let i = 0; i < bits.length; i++) {
      const bit = bits[i];
      ctx.moveTo(bit.x, bit.y);
      for (let j = i + 1; j < bits.length; j++) {
        const other = bits[j];
        ctx.moveTo(bit.x, bit.y);
        ctx.lineTo(other.x, other.y);
      }
    }
    ctx.stroke();
    ctx.closePath();
  }

  addEventListener("pointerdown", (e) => {
    bits.push({
      x: e.clientX * dpr,
      y: e.clientY * dpr,
    });
  });
</script>
